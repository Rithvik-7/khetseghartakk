<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Products | Khet Se Ghar Tak</title>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poiret+One&family=Sansation:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    *{
      margin:0;
      padding:0;
      box-sizing:border-box;
    }

    body{
      font-family: 'Sansation', sans-serif;
      background: url("PHOTOS/mainbackground.jpeg") 
      
      
    }

    /* ---------------- NAVBAR ---------------- */
    .navbar{
      position:fixed;
      top:0;
      width:100%;
      height:12vh;
      padding:0 40px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      background:rgba(255,255,255,0.15);
      backdrop-filter:blur(12px);
      border-bottom:1px solid rgba(255,255,255,0.25);
      z-index:10;
    }

    .nav-left .logo{
      font-family: 'Sansation', sans-serif;
      font-size:2.5rem;
      font-weight:700;
      color: #faebc1;
      position:relative;
      cursor:pointer;
    }

    .logo::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-6px;
      width:0%;
      height:2px;
      background:#faebc1;
      transition:0.4s;
    }

    .logo:hover::after{ width:100%; }

    .nav-right{
      display:flex;
      gap:25px;
      align-items:center;
    }

    .nav-link{
      color:#faebc1;
      font-size: 1.4rem;
      text-decoration:none;
      position:relative;
      margin-left: 6vw;

    }

    .nav-link::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-6px;
      width:0%;
      height:2px;
      background:#faebc1;
      transition:0.4s;
    }

    .nav-link:hover::after{ width:100%; }
    .search-box{
      margin:30px auto;
      width: 25vw;
      
      display:flex;
    }

    .search-box input{
      flex:1;
      padding:10px;
      border:none;
      outline:none;
      border-radius:10px 0 0 10px;
    }

    .search-box button{
      padding:10px 15px;
      border:none;
      cursor:pointer;
      background-color: #faebc1;
      border-radius:0 10px 10px 0;
    }

    /* ---------------- PAGE ---------------- */
    h1{
      margin-top:120px;
      text-align:center;
      font-family:'Poiret One', cursive;
      letter-spacing:2px;
    }

    

    /* ---------------- PRODUCTS ---------------- */
    .product-grid{
      display:grid;
      grid-template-columns: repeat(4, 1fr);

      gap:30px;
      padding:50px;
    }

    .product-card{
      background: rgba(255, 255, 255, 0.3); /* light transparent layer */
    border-radius: 20px;
    backdrop-filter: blur(10px);           /* THIS is the glass effect */
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
      border-radius:16px;
      padding:15px;
      cursor:pointer;
      height: 45vh;
      width: 20vw;
      transition:transform 0.3s;
      
    }

    .product-card:hover{ transform:scale(1.05); }

    .product-image{
      height:25vh;
      border-radius:12px;
      background-size:cover;
      background-position:center;
      margin-bottom:10px;
    }

    .product-card h3{ margin:5px 0; color: #faebc1;}
    h1{
     margin-left: 10vw;
      padding-top: 1.3vh;
      text-align: center;
      width: 80vw;
      height: 4vw;
      background: rgba(255, 255, 255, 0.3); /* light transparent layer */
    border-radius: 20px;
    backdrop-filter: blur(10px);           /* THIS is the glass effect */
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
    color: #faebc1;
    font-family: 'Sansation', sans-serif;

    }
    
  </style>
</head>
<body>

  <!-- NAVBAR -->
  <nav class="navbar">
    <div class="nav-left">
      <div class="logo">Khet Se Ghar Tak</div>
    </div>
    <div class="nav-right">
        <div class="search-box">
    <input id="searchInput" placeholder="Search product" />
    <button id="searchBtn"><i class="fa fa-search"></i></button>
  </div>
      <a href="home.html" class="nav-link">Home</a>
      <a href="cart.html" class="nav-link" style="margin-right: 3vw;">Cart</a>
      
    </div>
  </nav>

  <h1>Straight From Farm To Home.</h1>

  

  <div id="productGrid" class="product-grid"></div>

 <script>
  // Default products
  const defaultProducts = [
    {name: "Tomato", img: "PHOTOS/tomato.PNG", price: 30, stock: 40, place: "Bangalore"},
    {name: "Potato", img: "PHOTOS/potato.png", price: 25, stock: 60, place: "Mysuru"},
    {name: "Onion", img: "PHOTOS/onion.png", price: 35, stock: 50, place: "Hubli"},
    {name: "Mango", img: "PHOTOS/mango.png", price: 80, stock: 30, place: "Ramanagara"},
    {name: "Apple", img: "PHOTOS/apple.png", price: 120, stock: 25, place: "Bangalore"},
    {name: "Banana", img: "PHOTOS/banana.png", price: 40, stock: 70, place: "Chikkaballapur"},
    {name: "Rice", img: "PHOTOS/rice.png", price: 55, stock: 100, place: "Mandya"},
    {name: "Wheat", img: "PHOTOS/wheat.png", price: 45, stock: 120, place: "Tumkur"},
    {name: "Jowar", img: "PHOTOS/jowar.png", price: 50, stock: 80, place: "Hassan"},
    {name: "Toor Dal", img: "PHOTOS/toor.png", price: 90, stock: 40, place: "Kolar"}
  ];

  const grid = document.getElementById("productGrid");

  // Load all products (default + farmer-added)
  function loadProducts() {
    const farmerProducts = JSON.parse(localStorage.getItem("farmerProducts")) || [];
    const allProducts = [...defaultProducts, ...farmerProducts];

    grid.innerHTML = "";

    allProducts.forEach(p => {
      const card = document.createElement("div");
      card.className = "product-card";

      card.innerHTML = `
        <div class="product-image" style="background-image:url('${p.img}')"></div>
        <h3>${p.name}</h3>
        <p>₹${p.price}/kg</p>
        <p>Stock: ${p.stock}kg</p>
        <p>From: ${p.place}</p>
      `;

      card.onclick = () => {
        window.location.href = 
          `product.html?name=${encodeURIComponent(p.name)}&img=${encodeURIComponent(p.img)}&price=${p.price}&stock=${p.stock}&place=${encodeURIComponent(p.place)}`;
      };

      grid.appendChild(card);
    });
  }

  loadProducts();

  // Search functionality
  document.getElementById("searchBtn").onclick = () => {
    const value = document.getElementById("searchInput").value.toLowerCase();
    const farmerProducts = JSON.parse(localStorage.getItem("farmerProducts")) || [];
    const allProducts = [...defaultProducts, ...farmerProducts];
    const filtered = allProducts.filter(p => p.name.toLowerCase().includes(value));
    grid.innerHTML = "";
    filtered.forEach(p => {
      const card = document.createElement("div");
      card.className = "product-card";

      card.innerHTML = `
        <div class="product-image" style="background-image:url('${p.img}')"></div>
        <h3>${p.name}</h3>
        <p>₹${p.price}/kg</p>
        <p>Stock: ${p.stock}kg</p>
        <p>From: ${p.place}</p>
      `;

      card.onclick = () => {
        window.location.href = 
          `product.html?name=${encodeURIComponent(p.name)}&img=${encodeURIComponent(p.img)}&price=${p.price}&stock=${p.stock}&place=${encodeURIComponent(p.place)}`;
      };

      grid.appendChild(card);
    });
  };
</script>

</body>
</html>
